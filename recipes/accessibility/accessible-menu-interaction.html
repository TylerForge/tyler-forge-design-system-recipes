<!DOCTYPE html>
<html lang="en">

<head>
  <title>Accessible Navigation Menu - Forge</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="../../../shared.css" />

  <link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/css/tyler-font.css" />
  <link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/forge-core.css" />
  <link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/theme/forge-theme.css" />
  <link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/typography/forge-typography.css" />
  <link rel="stylesheet" href="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/icon-button/forge-icon-button.css" />
</head>

<body class="forge-typography">
  <forge-scaffold id="main-scaffold">
    <div slot="left" id="scaffold-left"></div>
    <forge-app-bar title-text="Application Title" slot="header">
      <forge-app-bar-menu-button id="menu-button" slot="start"></forge-app-bar-menu-button>
      <forge-icon slot="logo" name="forge_logo" external external-type="custom"></forge-icon>
    </forge-app-bar>

    <nav slot="left" id="nav-container">
      <forge-modal-drawer id="nav-drawer">
        <forge-list>
          <forge-list-item selected="true">
            <forge-icon slot="leading" name="add" external></forge-icon>
            Create
          </forge-list-item>
          <forge-list-item>
            <forge-icon slot="leading" name="search" external></forge-icon>
            Search
          </forge-list-item>
          <forge-list-item>
            <forge-icon slot="leading" name="settings" external></forge-icon>
            Settings
          </forge-list-item>
        </forge-list>
      </forge-modal-drawer>
    </nav>
  </forge-scaffold>

  <script defer>
    const forgeAppBarMenuButton = document.querySelector('#menu-button');
    const navContainer = document.querySelector('#nav-container');
    const navDrawer = document.querySelector('#nav-drawer');

    forgeAppBarMenuButton.addEventListener('click', () => {
      toggleMenuOpen();
    })

    async function setMenuButtonAriaAttributes() {
      await window.customElements.whenDefined('forge-app-bar-menu-button');
      let innerMenuButton = forgeAppBarMenuButton.querySelector('button');
      navDrawer.setAttribute('aria-expanded', "false");
      navContainer.setAttribute('aria-expanded', 'false');
      innerMenuButton.setAttribute('aria-label', 'Open navigation menu');
      innerMenuButton.setAttribute('aria-expanded', 'false');
      innerMenuButton.setAttribute('aria-haspopup', 'true');
      innerMenuButton.setAttribute('aria-controls', 'menu');
    }

    function toggleMenuOpen() {
      navDrawer.open = !navDrawer.open;
      let currentNavDrawerAriaExpanded = navContainer.getAttribute('aria-expanded');
      if (currentNavDrawerAriaExpanded === 'true') {
        navContainer.setAttribute('aria-expanded', 'false');
      } else {
        navContainer.setAttribute('aria-expanded', 'true');
      }
    }

    setMenuButtonAriaAttributes();
  </script>

  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/scaffold/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/app-bar/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/icon/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/drawer/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/drawer/modal-drawer/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/list/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/toolbar/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/card/index.js"></script>
  <script type="module" src="https://cdn.forge.tylertech.com/v1/libs/@tylertech/forge@2.11.0/app-bar/menu-button/index.js"></script>
</body>

</html>